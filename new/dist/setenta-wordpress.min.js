/*! setenta-wordpress 15-02-2015 */
$(document).ready(function(){var a=$("#year-copy"),b=new Date;a.html(2013===b.getFullYear()?"2013":"2013-"+b.getFullYear().toString())}),$(document).ready(function(a){function b(){var a=document.body.clientWidth;a?e.$ScaleWidth(Math.min(a,1920)):window.setTimeout(b,30)}var c=[],d={$FillMode:2,$AutoPlay:!0,$AutoPlayInterval:4e3,$PauseOnHover:1,$ArrowKeyNavigation:!0,$SlideEasing:$JssorEasing$.$EaseOutQuint,$SlideDuration:800,$MinDragOffsetToSlide:20,$SlideSpacing:0,$DisplayPieces:1,$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1,$CaptionSliderOptions:{$Class:$JssorCaptionSlider$,$CaptionTransitions:c,$PlayInMode:1,$PlayOutMode:3},$BulletNavigatorOptions:{$Class:$JssorBulletNavigator$,$ChanceToShow:2,$AutoCenter:1,$Steps:1,$Lanes:1,$SpacingX:8,$SpacingY:8,$Orientation:1,$Scale:!1},$ArrowNavigatorOptions:{$Class:$JssorArrowNavigator$,$ChanceToShow:1,$AutoCenter:2,$Steps:1}},e=new $JssorSlider$("slider-container",d);b(),a(window).bind("load",b),a(window).bind("resize",b),a(window).bind("orientationchange",b)}),angular.module("newsWidget",["ngResource","ngSanitize","pascalprecht.translate"]).config(["$translateProvider",function(a){a.translations("pl",{PN:"Poniedziałek",WT:"Wtorek",SR:"Środa",CZ:"Czwartek",PT:"Piątek",SB:"Sobota",ND:"Niedziela"}),a.preferredLanguage("pl")}]).controller("registrationCtrl",["$scope","newsFactory",function(a,b){a.courseLoading=!0,b.registrationCourses().$promise.then(function(b){var c=_.groupBy(b,function(a){return a.style.sid});a.courseGroups=_.values(c),a.courseLoading=!1}),a.resolveStyleImage=function(a){return a.name.indexOf("Balet")>-1?"ballet.png":a.name.indexOf("użytkowy")>-1?"pair.png":a.name.indexOf("Mix dance")>-1?"mix-dance.png":a.name.indexOf("Reggaeton")>-1?"reggaeton.png":a.name.indexOf("Hip hop")>-1?"hip-hop.png":a.name.indexOf("towarzyski")>-1?"ballroom.png":void 0}}]).controller("newsCtrl",["$scope","newsFactory",function(a,b){a.newsLoading=!0,a.postLimit=5,a.searchText="",b.findPosts().$promise.then(function(b){a.posts=b,a.newsLoading=!1}),a.loadMore=function(){a.postLimit+=5},b.findTags().$promise.then(function(b){a.tags=b}),a.toggleTag=function(b){return a.selectedTag==b?void(a.selectedTag=null):void(a.selectedTag=b)}}]).factory("newsFactory",["$resource",function(a){return a(null,null,{findPosts:{url:"/wp-json/posts?filter[posts_per_page]=50",method:"GET",isArray:!0},findTags:{url:"/wp-json/taxonomies/post_tag/terms",method:"GET",isArray:!0},registrationCourses:{url:"http://91.218.78.136/public/course/registration.json",method:"JSONP",params:{callback:"JSON_CALLBACK"},isArray:!0}})}]),angular.module("scheduleWidget",["ngResource","pascalprecht.translate"]).config(function(a){a.translations("pl",{PN:"Poniedziałek",WT:"Wtorek",SR:"Środa",CZ:"Czwartek",PT:"Piątek",SB:"Sobota",ND:"Niedziela",BEGINNER:"Początkujący",INTERMEDIATE:"Średniozaawansowany",ADVANCED:"Zaawansowany",OPEN:"Otwarty"}),a.preferredLanguage("pl")}).controller("scheduleCtrl",["$scope","$filter","courseHttpClient","courseService",function(a,b,c,d){a.loadingView=!0,a.courseList=[],a.days=["PN","WT","SR","CZ","PT","SB","ND"],a.initCalendar=function(){c.findSchedule().$promise.then(function(b){a.courseList=b;var c=d.getScheduleOptionsByRoom("d",b);$("#bigSchedule").fullCalendar(c);var e=d.getScheduleOptionsByRoom("m",b);$("#smallSchedule").fullCalendar(e),a.loadingView=!1})}}]).factory("courseHttpClient",["$resource",function(a){var b="http://91.218.78.136/public",c={getRestUrl:function(a){return b+a}},d=c.getRestUrl("/course/registration.json"),e=c.getRestUrl("/course/list.json");return a(null,null,{findFuture:{url:d,method:"JSONP",params:{callback:"JSON_CALLBACK"},isArray:!0},findSchedule:{url:e,method:"JSONP",params:{callback:"JSON_CALLBACK"},isArray:!0}})}]).factory("courseService",[function(){var a=function(a,c){var d=a.getDate(),e=new Date(a);e.setDate(d+b(c.day));var f=c.startTime.split(":");e.setHours(f[0]),e.setMinutes(f[1]),e.setSeconds(0);var g=new Date(a);g.setDate(d+b(c.day));var h=c.endTime.split(":");return g.setHours(h[0]),g.setMinutes(h[1]),g.setSeconds(0),{start:e,end:g}},b=function(a){return"PN"==a?0:"WT"==a?1:"SR"==a?2:"CZ"==a?3:"PT"==a?4:"SB"==a?5:"ND"==a?6:-1},c=function(a){return"BEGINNER"==a?"początkujący":"INTERMEDIATE"==a?"średniozaaw.":"ADVANCED"==a?"zaawansowany":"OPEN"==a?"otwarty":""},d=function(a){var b="<h4>"+a.style.name+"</h4><table><tr><td><strong>Instruktor:&nbsp;&nbsp;&nbsp;</strong></td><td>";return null!==a.instructor&&(b+=a.instructor.firstName,null!==a.instructor.lastName&&(b+=" "+a.instructor.lastName)),b+="</td></tr>",""!==a.level&&(b+="<tr><td><strong>Poziom: </strong></td><td>",b+="BEGINNER"==a.level?"podstawowy":"INTERMEDIATE"==a.level?"średniozaawansowany":"ADVANCED"==a.level?"zaawansowany":"OPEN"==a.level?"otwarty":"",b+="</td></tr>"),b+="<tr><td><strong>Sala: </strong></td><td>",b+=a.room.name,b+="</td></tr>",b+="</table>",a.canRegister?b+="<div class='alert-danger alert-popover'><i class='fa fa-pencil'></i> ZAPISY</div>":a.canJoin||(b+="<div class='alert-danger alert-popover'><i class='fa fa-ban'></i> BRAK MIEJSC</div>"),a.canJoin&&(b+="<div class='alert-danger alert-popover'><i class='fa fa-plug'></i> WOLNE MIEJSCA</div>"),b};return{getScheduleOptionsByRoom:function(b,e){return{lang:"pl",defaultView:"agendaWeek",axisFormat:"H:mm",allDaySlot:!1,header:{left:"",center:"",right:""},slotDuration:"00:15:00",minTime:"10:00:00",maxTime:"23:00:00",height:"auto",columnFormat:{week:"dddd"},events:function(f,g,h,i){var j=[];e.forEach(function(e){if(e.room.code==b){var g=a(f._d,e);j.push({sid:e.sid,title:e.style.name,level:c(e.level),start:g.start,end:g.end,allDay:!1,canJoin:e.canJoin,canRegister:e.canRegister,description:d(e)})}}),i(j)},eventRender:function(a,b){var c="";c+="<br/><input type='hidden' name='sid' value='"+a.sid+"'>",a.canRegister?(b.addClass("course-register"),c+='<span class="badge badge-danger">ZAPISY</span>'):a.canJoin?c+="<em>"+a.level+"</em>":(b.addClass("course-ban"),c+="<em>"+a.level+"</em><br/><span class='badge badge-error'>BRAK MIEJSC</span>"),b.find(".fc-title").append(c),b.popover({trigger:"hover",html:!0,container:"body",placement:"top",content:a.description})}}}}}]);